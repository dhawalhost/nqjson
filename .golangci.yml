# golangci-lint configuration
# See https://golangci-lint.run/usage/configuration/ for more information
version: "2"

run:
  timeout: 5m
  issues-exit-code: 1
  tests: true

output:
  formats:
    text:
      path: stdout
      print-issued-lines: true
      print-linter-name: true
      colors: true

linters:
  # v2: use default none instead of disable-all
  default: none
  enable:
    - bodyclose
    - copyloopvar
    - depguard
    - dogsled
    - dupl
    - errcheck
    # - exhaustive
    # - funlen
    # - gochecknoinits
    # - goconst
    # - gocritic
    - gocyclo
    - goprintffuncname
    - gosec
    # - gosimple
    - govet
    - ineffassign
    # - lll
    - misspell
    - nakedret
    - noctx
    - nolintlint
    - predeclared
    # - revive
    - rowserrcheck
    - staticcheck
    - unconvert
    # - unparam
    - unused
    - whitespace
  settings:
    dupl:
      threshold: 100
    funlen:
      lines: 100
      statements: 50
    gocritic:
      enabled-tags:
        - diagnostic
        - experimental
        - opinionated
        - performance
        - style
      disabled-checks:
        - dupImport # https://github.com/go-critic/go-critic/issues/845
        - ifElseChain
        - octalLiteral
        - whyNoLint
        - wrapperFunc
    gocyclo:
      min-complexity: 15
    govet:
      settings:
        printf:
          funcs:
            - (github.com/golangci/golangci-lint/pkg/logutils.Log).Infof
            - (github.com/golangci/golangci-lint/pkg/logutils.Log).Warnf
            - (github.com/golangci/golangci-lint/pkg/logutils.Log).Errorf
            - (github.com/golangci/golangci-lint/pkg/logutils.Log).Fatalf
    misspell:
      locale: US
  exclusions:
    paths:
      - vendor
      - ".*_test.go"
    rules:
      - path: _test\.go
        linters:
          - funlen
          - gocyclo
      - linters:
          - gocritic
        text: "unnecessaryDefer:"
      - path: _test\.go
        linters:
          - gocyclo
          - errcheck
          - dupl
          - gosec
      - linters:
          - staticcheck
        text: "SA9003:"

formatters:
  settings:
    gci:
      sections:
        - standard
        - default
        - prefix(github.com/dhawalhost/nqjson)
    goimports:
      local-prefixes:
        - github.com/dhawalhost/nqjson

issues:
  # Maximum issues count per one linter. Set to 0 to disable. Default is 50.
  max-issues-per-linter: 0

  # Maximum count of issues with the same text. Set to 0 to disable. Default is 3.
  max-same-issues: 0

  new: false

